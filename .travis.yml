language: python
python:
- '3.6'
install:
- pip install ansible==2.7.1 molecule==2.19.0 apache-libcloud pycrypto
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
env:
  global:
  - secure: AEJDemspWhjoAb6KnBHt3BjiO6GulyqcBrlwdte39JEV1na2AgFCCGA4cpONmQzNnt+WcuUgrqpOwt4umqqdNxMcjbc8ZN+gLIcvnM4eVs8FsswbmKLoO1NJAcA2PbEoF4Ez42aV9pL6xb2SajN0SLyZ6NRnJy09PMw8sRPCb4/imctrInGAHWAe7UoLZWD9DLnkzbkG+aeabiEZDMOf0pMCSkW8WuVAt/pMg9HaRbDfLFtK624dqOuhXD1Tj/pqvTkvrbXIKonRlpojpFT9Cb/d5gPFZrPDg9xoQ9DDDCQJsn6uQ/s21XPelWBKpNmBo50bXsdPNgDz1ilnB1geYbZekfW6+mrQNKCbwWUvK3wQY4aoQ0+aXnEil1ZZ45FjibcMpVYqSc0xzFb0NVGVCWMs3cHsUYS350kiXdz1mUZXLakqEI5P7aj7kNwyUlEupokAac6ztTFdVtlYd77jeLl6ZUaRti5Z69u7j4/VplvAeCkbAVPb9qkiSwBXh1UECfMuPk9E8ygI3Saim0IZygWkpnDinz7qS6UOj/EqOhffovwidb+yHRRECfqcVcnAOo3wFImxjFooEqFIKUqvp2jvY1QA6tJaAEfN2R0m08WejkAxW4g2tWZBuNT6W+upFEFqdSDgtUHI50+g1z1xvUV7m8sdIG2EzwyrDX+iljc=
  - secure: j+N5cNW18qKrMyMgUbMq1mKg6vqaqObuFTZmSM+uAYuT7iV6ERGr3B82trF4faZgTWjXvU5CGyKIAbZe6Sk51ySLwKCiM+NszqumHP6pqYpkK1j9v9GJOaBIWpcSGB//FaRy+q1e2eUubzWIOnSFAkKFPLe3p+zephHirsiTt/tg2mFn39o4EGR4w5I8wAHQ2ZExb7xAihjQO49PxiwHoR234vD6Com+eY6+0G1arIHBe5ACrYx4af4Q4jFqEMhtAdq8J9Cnb/uZ01PKLQkTg+7HAs0+zMoNAc++xg13bx11Th3o9YonLkUyrLGaa7g+lxLQvNsf8nSWACGtM/nxbrVivtrZQKa00fiGDYxpzLbful58p2pwtFds5oYVHfiCoj7lHx8Fsz9om9EDduxtQNLGtulUYQrXu8Y7q8KSKP2UUJkrFFmxYJ5i7f04GQwYR+vyA1q7ChLbJSfvYur1ayAItQRRhjB0S5EqjLEA5WnW0973jDdfs40eN86oh0pFzKfgeh/aAU87TojK1gLpZztOBUrn0v6WOrvXdwhuZeTd90N04ZjWB2M5SjEv8WovqED9Jc4LPeUEFxWhoApssYjZCN3L8QJ5jkYZkaSCp14RQTfavZhKcPZ0/xzluxG/K7651KcArJ7htltchoQx9jBQNFT5FZLNHlVLo0k3LIk=
  - secure: WSIk6zIqf05p+eRpb8CL1GZOPt5TxDBojQOe0nDbJlhnaF5BaVdiEeXnU/cIgsgg2dgjv4Myh8tXCeEafi7cnk9FVIB++PiyGKLjC9dsRtsn8NscMGvwowp3XecL1aljCj+BEKBq2lh305ZGQ19ocM0P+8RIUoqHITU/f6WkQZmf9aH7x7SBxDJWChO6dmo6TSFMIztN1fUND26piIhp/xvjGhDFA4EmQ8QbNUYlnIQP5gmsexP8I0kIkHpxAsaSqDc2k9RWnPouZftdEUVpVIT27f4mN6gLtjT3EJr2FtJUHxmQtUP6bPAgo8QiglXRXl4BguYsbI4oTYstC5Qg0qPN9/hkB+gEexez88+a8z3QnWCf+HzX2eTOaYNPHTuCezQZZZnbvPJxUQSoobhYFKjK/MI8fh9UWedJ9D8pMe8F+QrUy0k6rNBPZMSi9I4CldqHxDULDiqdSt1Ea3DH6afU/q6/75LUdD4xDfLWKH6pBi3D51Fw+wxphlmpvVj7E9PHyraZqvM/HasFrB57Fb60blxnYnK8WWtfKR0hYf72ybPjj+RgL1gswjFMn2y7cPC4oQL7u+tTS747MEocHXtfKpJGVWHqywJG1iweElIyPcxR1EGgMoTOueTki7j4+iG7x7KKcK7UioGtm9euW16S+rYO7etjypYWD6Zcv9Q=
before_install:
- openssl aes-256-cbc -K $encrypted_af02bb7c7f63_key -iv $encrypted_af02bb7c7f63_iv 
  -in secrets.tar.enc -out secrets.tar -d
- tar -xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
- echo $GCE_PROJECT_ID
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
notifications:
  slack:
    rooms:
      secure: qj4HA/A0JF6D/IH3cSc5iy0bNlVikAvlwilMDrJ4jy0yM/9XDk25HSo2MU0WGFU8xtNgW6Z7vy0ONdG8dXAWNLHO1nwKu0ae2h2VuEwJMrIVh1X9ii3apBQpvfz+OABT7sbUUZTqLq1emXn2TMuE7EsubrRqAqSEvGjXsSiocijknNd6YQ6q82/pl8ADHdMu76pfeEEg+iMFO6iSRdW5W42XoP1Yb6wu9TBCPnDqwDs7YByXkfMDn/t1S02y5TpyiPqebQvmdYtwWtGSFVyZwFTaeK5X+qi9Fe/S8vtS3X/B/+8yB9Mc+doLkN7TNXPaOkeCFjufcYWeRVzwcISUsJ7SKP/4oN5CZcFXx2QKRyoZl2EIUq9Q+X9PC6e1Z1bhbkHIr9OE59ycTdn4I3shllAjll4sP5kRl8vDrwp5H3l1hwggpZoMES7q1s1LZ4hzy7WynG5F3dQ5oyaAe2N/69yNROhYz8O25PI0uaQdD42F+xqaFn12LV6QMLGhwor9BdlagPCWlezSzBPfs15y6qdwlpKJvpetaLZ3bVRBm2OA2AYuIV8vpKFS0dLwpvVex0YvQxvDJe6RDFFCwFDt5yscZVpxqE4/cy0iv58m03JkEiSZlT2UW64KvnzHyXTk+aHoqFJgLV+fGd9TinUrEmkkAKx2f7pgDwZbAToL3U8=
