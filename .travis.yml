language: python
python:
- '3.6'
install:
- pip install ansible==2.7.1 molecule==2.19.0 apache-libcloud pycrypto
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: AEJDemspWhjoAb6KnBHt3BjiO6GulyqcBrlwdte39JEV1na2AgFCCGA4cpONmQzNnt+WcuUgrqpOwt4umqqdNxMcjbc8ZN+gLIcvnM4eVs8FsswbmKLoO1NJAcA2PbEoF4Ez42aV9pL6xb2SajN0SLyZ6NRnJy09PMw8sRPCb4/imctrInGAHWAe7UoLZWD9DLnkzbkG+aeabiEZDMOf0pMCSkW8WuVAt/pMg9HaRbDfLFtK624dqOuhXD1Tj/pqvTkvrbXIKonRlpojpFT9Cb/d5gPFZrPDg9xoQ9DDDCQJsn6uQ/s21XPelWBKpNmBo50bXsdPNgDz1ilnB1geYbZekfW6+mrQNKCbwWUvK3wQY4aoQ0+aXnEil1ZZ45FjibcMpVYqSc0xzFb0NVGVCWMs3cHsUYS350kiXdz1mUZXLakqEI5P7aj7kNwyUlEupokAac6ztTFdVtlYd77jeLl6ZUaRti5Z69u7j4/VplvAeCkbAVPb9qkiSwBXh1UECfMuPk9E8ygI3Saim0IZygWkpnDinz7qS6UOj/EqOhffovwidb+yHRRECfqcVcnAOo3wFImxjFooEqFIKUqvp2jvY1QA6tJaAEfN2R0m08WejkAxW4g2tWZBuNT6W+upFEFqdSDgtUHI50+g1z1xvUV7m8sdIG2EzwyrDX+iljc=
  - secure: j+N5cNW18qKrMyMgUbMq1mKg6vqaqObuFTZmSM+uAYuT7iV6ERGr3B82trF4faZgTWjXvU5CGyKIAbZe6Sk51ySLwKCiM+NszqumHP6pqYpkK1j9v9GJOaBIWpcSGB//FaRy+q1e2eUubzWIOnSFAkKFPLe3p+zephHirsiTt/tg2mFn39o4EGR4w5I8wAHQ2ZExb7xAihjQO49PxiwHoR234vD6Com+eY6+0G1arIHBe5ACrYx4af4Q4jFqEMhtAdq8J9Cnb/uZ01PKLQkTg+7HAs0+zMoNAc++xg13bx11Th3o9YonLkUyrLGaa7g+lxLQvNsf8nSWACGtM/nxbrVivtrZQKa00fiGDYxpzLbful58p2pwtFds5oYVHfiCoj7lHx8Fsz9om9EDduxtQNLGtulUYQrXu8Y7q8KSKP2UUJkrFFmxYJ5i7f04GQwYR+vyA1q7ChLbJSfvYur1ayAItQRRhjB0S5EqjLEA5WnW0973jDdfs40eN86oh0pFzKfgeh/aAU87TojK1gLpZztOBUrn0v6WOrvXdwhuZeTd90N04ZjWB2M5SjEv8WovqED9Jc4LPeUEFxWhoApssYjZCN3L8QJ5jkYZkaSCp14RQTfavZhKcPZ0/xzluxG/K7651KcArJ7htltchoQx9jBQNFT5FZLNHlVLo0k3LIk=
  - secure: WSIk6zIqf05p+eRpb8CL1GZOPt5TxDBojQOe0nDbJlhnaF5BaVdiEeXnU/cIgsgg2dgjv4Myh8tXCeEafi7cnk9FVIB++PiyGKLjC9dsRtsn8NscMGvwowp3XecL1aljCj+BEKBq2lh305ZGQ19ocM0P+8RIUoqHITU/f6WkQZmf9aH7x7SBxDJWChO6dmo6TSFMIztN1fUND26piIhp/xvjGhDFA4EmQ8QbNUYlnIQP5gmsexP8I0kIkHpxAsaSqDc2k9RWnPouZftdEUVpVIT27f4mN6gLtjT3EJr2FtJUHxmQtUP6bPAgo8QiglXRXl4BguYsbI4oTYstC5Qg0qPN9/hkB+gEexez88+a8z3QnWCf+HzX2eTOaYNPHTuCezQZZZnbvPJxUQSoobhYFKjK/MI8fh9UWedJ9D8pMe8F+QrUy0k6rNBPZMSi9I4CldqHxDULDiqdSt1Ea3DH6afU/q6/75LUdD4xDfLWKH6pBi3D51Fw+wxphlmpvVj7E9PHyraZqvM/HasFrB57Fb60blxnYnK8WWtfKR0hYf72ybPjj+RgL1gswjFMn2y7cPC4oQL7u+tTS747MEocHXtfKpJGVWHqywJG1iweElIyPcxR1EGgMoTOueTki7j4+iG7x7KKcK7UioGtm9euW16S+rYO7etjypYWD6Zcv9Q=
  - secure: iMJ7Wvr1lPI/HzETLas8n+Ezd3heLstN1z/HWvNOuxzvSA04SkBXI7D4cm/fkTf/9gYbCxJv1AjDINAUraLBbB73wrt/ean+wDow4LdBYxPKdh0lttgFRnYINjp/xhHx4+hUK8S5lhSIkkKB2rFXYlSOhX0blnIFZWBLb+xGWjX8bjeBwgJ1ufTb6r5FD7PdL5t0EwOIQDiglK3VnIOEixD56jL4hlBJ+aA54pz0KyTEl4q5O0Gn+pU6JG9DZL30s5v/VlsaMRPRQG36YWSUbyOA+Ny1fkdkzWPlC1NBM6VvtCr9iIpBVZxVNHXXL41PYqOhclVIh6WanhwTDMqlu4gwgfRdfTxdr0YQBEG8PYl9CbzaURGN8a71zg3FX4DGu4B3idu1L1cDwxM/Wavk2S9dMpaE1Iv7Nz0TSp75IyO67e1jXwTc/oP2duQLGhcG2vxYCVCIn48XaZwMf2Q17TrJq4aleKZPFKt6gzosNcmu2ER1+FoXvz0Q0B3V5QemcXCIVyc43TVVb6uPK4hxWrZLnSIUu7smYgmPvlHgZdM7QnfU1P+hRlEuJHeDgQuZEzbEHnJGnoGLZjwCYSOMoZjkGOGPuYKT0J68DL0XNN6j7JAyz1wYdB64kQe4y9edt3WhBkDSy864vHHfF/VnoDnJSdz1xusRibehEtDR8v8=
  - secure: FAhAA+QSvwGB7UmSfzX5PNmnwR3w8KyWsbf7FXRkLsqSqwcsKbUL5CK/FeI1zxAUr0VoE49kBufYeKHm6nhWllbS1iMHpLsl9rSWJ1AeOfCvVrO/2PjeN7CRRkdWbgBsw/IvDp3DXtPLHAfHV7XZGguhq1MDQo+ZvUgOQFmFz/EIN8Ul/mLG+GgmxcehIYD8k974Drh7SK5To1DEr/sMH3T34WDxluE1QrcxT6rIf9u7G3rIdEbWfD4mXC3EUQllEBd8ZMgg7VWl7/tfjf7ufcVACigTAK7H59bUvOLovpPqUpiP0Eizxjqa4aFOu1Ag6Tw6UmoD9tubCtUwjYc3eDBhm3fVlz7aKWLaDcJ9bYVID9fFJy3yuNFSDAZ8yPYi5uasHL5XlhR0vrc5DHiWr4kDTinu/Q+kA7aCMcfvPOnvSN2JxUrHrMV2rRvPIuOaENNXnvUdK644iUC4CcbzIq9cNCEFc1Fbic1pblrMRHc6CGJx+mFoS8WJzFhpfa8lyOwmvR9veixynUhGrUvm7ZnDWsUPwcCcEvlb88JpuWYtIb2OyFEc2+bBzfdM4e30IE0RiTq+ftLuWnOzJI+KD7Yo7lS3jkARo9dpW2jOgYvel8wIq6MkRhjiHPT4Q+MkGGmWP6JB4U38Qe+UfI3TZ6U056odeHr9zirYKGuodzI=
  - secure: h5luvqcoyrxZr8vUTnoSSFtkv7QZUEza+L4TpnxIpxNXduF1ue7Uk56oGC5/s12FVp08TgishiL1qi65Vrpy22NoROaBEb8tF+o5k1gnznKOuRT+qWlkLpFAWugS2SrGikpJLqTQFjpV8NTqBfKm7p4eN9b/74MtKeaYrToHFEZufTcS7/Gi/rZr/ob0kzFEF2yGDZ+nuFdJ52coVselunyg1GA5ekQwDhPQTJ9BGErrYDDkTv3QPqhpeWZu2X4uiFL823yK/2uIUoTCiUkMREOZ36giPOSfv7qlpcMc8VQW58Q+6z9rzakOOJHWXGz9Ohdy05XxNDDCdgXDeuW2SRo+480zbLUEgkKdMX/HHeXYNwziSx21K4Q2kconCTc0Bk0MmCCf+0kb9Snw5a+R6p1ygSxvvY6JIrLLfWCJ8hE3gnaoEqBMoAZXEJaqxpYHq6dD5qDuxjCoOvBK4GEacGXkBuqhnbS1Eb2D74fI0sSpKaWrINYmgthVlsLOsGez18Cla5w71mWlbNleROHjncZvWaZZMSeR9oEBzrVFadCopdOHWSaelD0Y4ANdICODBKyWTzqG6LCxHC33jm+L1rzA51N4qjes8XsCaKS+veVtaa5NkrCLxhJfWM5y5Xeoggv/izbs939cqgBrdVVt7FB0Jh70kiSM/RwCLIluYAs=
before_install:
- openssl aes-256-cbc -K $encrypted_116bbc9c8ed0_key -iv $encrypted_116bbc9c8ed0_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar -xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
- echo $GCE_PROJECT_ID
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
notifications:
  slack:
    rooms:
      secure: qj4HA/A0JF6D/IH3cSc5iy0bNlVikAvlwilMDrJ4jy0yM/9XDk25HSo2MU0WGFU8xtNgW6Z7vy0ONdG8dXAWNLHO1nwKu0ae2h2VuEwJMrIVh1X9ii3apBQpvfz+OABT7sbUUZTqLq1emXn2TMuE7EsubrRqAqSEvGjXsSiocijknNd6YQ6q82/pl8ADHdMu76pfeEEg+iMFO6iSRdW5W42XoP1Yb6wu9TBCPnDqwDs7YByXkfMDn/t1S02y5TpyiPqebQvmdYtwWtGSFVyZwFTaeK5X+qi9Fe/S8vtS3X/B/+8yB9Mc+doLkN7TNXPaOkeCFjufcYWeRVzwcISUsJ7SKP/4oN5CZcFXx2QKRyoZl2EIUq9Q+X9PC6e1Z1bhbkHIr9OE59ycTdn4I3shllAjll4sP5kRl8vDrwp5H3l1hwggpZoMES7q1s1LZ4hzy7WynG5F3dQ5oyaAe2N/69yNROhYz8O25PI0uaQdD42F+xqaFn12LV6QMLGhwor9BdlagPCWlezSzBPfs15y6qdwlpKJvpetaLZ3bVRBm2OA2AYuIV8vpKFS0dLwpvVex0YvQxvDJe6RDFFCwFDt5yscZVpxqE4/cy0iv58m03JkEiSZlT2UW64KvnzHyXTk+aHoqFJgLV+fGd9TinUrEmkkAKx2f7pgDwZbAToL3U8=
